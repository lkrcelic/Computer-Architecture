;R0 POKAZIVAC NA PARAMETRE
;R1 PRVI OPERAND
;R2 DRUGI OPERAND
;R3 REZULTAT OPERACIJE
;R4 POKAZIVAC NA RJESENJA
;R5 I R6 POMOCNI REGISTRI

  MOV R0,#0x500
  MOV R4,#0X1000
  MOV SP, #0x10000

;MAIN
POCETAK LDR R1,[R0],#4
   CMP R1,#0
   BEQ ZBROJI
   CMP R1,#1
   BEQ ODUZMI
   CMP R1,#2
   BEQ MNOZI
   CMP R1,#3
   BEQ DIJELI
        
   MVN R0,#0
   STR R0,[R4],#4
   SWI 0x123456


ZBROJI            ;ZBRAJANJE
  STMFD SP!, {R1}
  LDR R1,[R0],#4
  LDR R2,[R0],#4

  ADD R3,R1,R2
  
  LDMFD SP!, {R1}
  STR R3,[R4],#4
  B POCETAK


ODUZMI            ;ODUZIMANJE
  STMFD SP!, {R1}
  LDR R1,[R0],#4
  LDR R2,[R0],#4
  
  SUB R3,R1,R2

  LDMFD SP!, {R1}
  STR R3,[R4],#4
  B POCETAK


MNOZI             ;MNOÅ½ENJE
  STMFD SP!, {R1}
  LDR R1,[R0],#4
  LDR R2,[R0],#4
  
  MUL R3,R1,R2

  LDMFD SP!, {R1}
  STR R3,[R4],#4
  B POCETAK


DIJELI             ;DIJELJENJE
  STMFD SP!, {R1,R5,R6}
  LDR R1,[R0],#4   ;DJELJENIK
  LDR R2,[R0],#4   ;DJELITELJ
  MOV R3,#0
  CMP R2,#0
  BEQ KRAJ 
  

;PROVJERA PREDZANAKA
  ADDS R1,R1,#0     
  RSBMI R1,R1,#0
  MOVMI R5,#1      

  ADDS R2,R2,#0     
  RSBMI R2,R2,#0  
  MOVMI R6,#1      

;ODUZIMANJE
LOOP
  CMP R1,R2
  BLO OUT
  SUB R1,R1,R2
  ADD R3,R3,#1
  B LOOP
OUT

;PROMJENA PREDZANKA
  CMP R5,R6
  BEQ KRAJ         ;AKO POZITIVAN BRANCH(0 0 ILI 1 1)   
  RSB R3,R3,#0     ;AKO NEGATIVAN DVOJNI KOMPLEMENT

KRAJ
  LDMFD SP!, {R1,R5,R6}
  STR R3,[R4],#4
  B POCETAK


;PARAMETRI
  ORG 0X500
  DW 0x00000003, 0xFFFFFEFF, 0x00000010

  DW 0x00000001, 0x000001F4, 0xFFFFFD44

  DW 0x00000002, 0xFFFFFFFE, 0x0000000A

  DW 0x00000003, 0xFFFFF000, 0xFFFFFFC0
  
  DW 0x80808080


;RJESENJA
  ORG 0X1000
  DW 0,0,0,0,0,0,0